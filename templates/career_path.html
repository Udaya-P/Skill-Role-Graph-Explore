<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Career Path Recommendation</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>

<body class="bg-light">

<div class="container py-4">

    <a href="/" class="btn btn-secondary mb-3">← Back</a>
    <h1>Career Path Recommendation</h1>

    <div class="card p-4 mb-4 shadow-sm">
        <form method="POST">
            <label class="form-label">Choose your current role</label>
            <select name="role_select" class="form-select">
                {% for r in roles %}
                <option value="{{ r }}" {% if r == selected_role %}selected{% endif %}>
                    {{ r }}
                </option>
                {% endfor %}
            </select>
            <button class="btn btn-primary mt-3">Show Suggested Next Roles</button>
        </form>
    </div>

    {% if suggestions %}
    <div class="card p-4 shadow-sm">
        <h3>Recommended Next Roles for <b>{{ selected_role }}</b></h3>
        <ol class="mt-3">
            {% for tgt, score in suggestions %}
            <li class="mb-3">
                <strong>{{ tgt }}</strong>  
                <span class="text-muted">(similarity: {{ "%.3f"|format(score) }})</span>

                <div class="mt-2">
                    <em>Skills you need to learn:</em>
                    {% if missing_map[tgt] %}
                    <ul>
                        {% for s in missing_map[tgt] %}
                        <li>{{ s }}</li>
                        {% endfor %}
                    </ul>
                    {% else %}
                        <p>No major missing skills — you are already close!</p>
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ol>
    </div>
    {% endif %}

</div>

</body>
</html>
